<requirestaff user="live.me" error="true">

  <staffheader></staffheader>

  <br>
  <div class="row">
    <div class="small-12 columns">

      <h3>Live Feed <span class="small grey">{{live.messages.length}} messages sent</span></h3>

      <!-- New message -->
      <p>
        <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Need help? Click here for a Markdown Cheat Sheet.</a>
      </p>
      <form ng-submit="live.message.create()">
        <div class="row">
          <div class="small-12 columns">
            <div class="row collapse">
              <div class="small-10 columns">
                <input type="text" placeholder="Hello, hackers!" ng-model="live.message.new.text">
              </div>
              <div class="small-2 columns">
                <button class="button postfix">Send</button>
              </div>
            </div>
          </div>
        </div>
      </form>

      <div ng-if="live.message.new.text">
        <div ng-bind-html="live.message.new.text|markdown|unsafe"></div>
        <hr>
      </div>

      <!-- List of messages -->
      <div ng-repeat="message in live.messages | orderBy:'created':true" class="expandable-list-item">

        <div class="row">

          <div class="small-12 columns content">

            <div class="small-11 columns">
              <span ng-bind-html="message.text|markdown|unsafe"></span>
              <span class="small grey" am-time-ago="message.created"></span>
            </div>
            <div class="small-1 columns align-right">
              <a ng-click="live.message.delete(message)" class="black"><i class="fa fa-trash fa-2x"></i></a>
            </div>

          </div>
        </div>

      </div>

    </div>
  </div>

</requirestaff>
